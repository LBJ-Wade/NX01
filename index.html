<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <link href='https://fonts.googleapis.com/css?family=Chivo:900' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-dark.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <title>NX01 by stevertaylor</title>
  </head>

  <body>
    <div id="container">
      <div class="inner">

        <header>
          <h1>NX01</h1>
          <h2>Python code to perform isotropic, anisotropic (non-evolving/evolving) searches.</h2>
        </header>

        <section id="downloads" class="clearfix">
          <a href="https://github.com/stevertaylor/NX01/zipball/master" id="download-zip" class="button"><span>Download .zip</span></a>
          <a href="https://github.com/stevertaylor/NX01/tarball/master" id="download-tar-gz" class="button"><span>Download .tar.gz</span></a>
          <a href="https://github.com/stevertaylor/NX01" id="view-on-github" class="button"><span>View on GitHub</span></a>
        </section>

        <hr>

        <section id="main_content">
          <h1>
<a id="nx01" class="anchor" href="#nx01" aria-hidden="true"><span class="octicon octicon-link"></span></a>NX01</h1>

<p>Python code to perform isotropic, anisotropic (non-evolving/evolving)
searches for gravitational-waves via pulsar-timing.</p>

<p>Perhaps you want the <a href="http://stevertaylor.github.io/NX01/">webpage</a>?</p>

<h2>
<a id="code-list" class="anchor" href="#code-list" aria-hidden="true"><span class="octicon octicon-link"></span></a>Code list</h2>

<ul>
<li>
<strong>NX01_master.py</strong>: performs a full evolving-anisotropy GWB and
noise analysis. Uses MultiNest or parallel-tempering sampling.</li>
<li>
<strong>NX01_singlePsr.py</strong>: performs a stochastic
search for single-pulsar noise parameters within the reduced-rank
time-frequency approximation. Uses MultiNest or parallel-tempering sampling.</li>
<li>
<strong>NX01_AnisCoefficients.py</strong>: utility file to create power-anisotropy
basis-functions.</li>
<li>
<strong>NX01_utils.py</strong>: utility file.</li>
<li>
<strong>NX01_plot.py</strong>: plotting package, adapted and extended from PAL.</li>
<li>
<strong>NX01_psr.py</strong>: utility file which defines the pulsar class for
storing all relevant variables.</li>
<li>
<strong>NX01_datafile.py</strong>: creates an hdf5 container to store all the
information in the pulsar class. Useful for storing array products.</li>
<li>
<strong>NX01_jitter.pxy</strong>: cython code to perform Sherman-Morrison
block noise-matrix inversions when handling ECORR (jitter). </li>
<li>
<strong>NX01_bayesutils.py</strong>: utilities file for generating plotting data.</li>
</ul>

<h2>
<a id="preliminaries" class="anchor" href="#preliminaries" aria-hidden="true"><span class="octicon octicon-link"></span></a>Preliminaries</h2>

<p>One important first thing to note is to make sure you have
correctly updated your tempo2 clock files with the corresponding files packaged with
the NANOGrav data download.</p>

<p>It is recommended that you initially open and follow the steps in the
<code>nanograv-pulsar-store.ipynb</code> notebook, and produce your own
<code>PsrListings_GWB.txt</code> and <code>PsrListings_CW.txt</code>. These latter files are
lists of pulsars in the order with which they contribute to the
stochastic background upper limit (<code>_GWB.txt</code>) and the single-source
SNR (<code>_CW.txt</code>). Each pulsar is associated with a path to an hdf5 file
(storing all pulsar properties), parfile, and timfile.</p>

<p>By following the steps in the notebook (only up until the
cross-validation plotting between NX01 and PAL2) you will produce your
own hdf5 files, which you should put in a directory of your
choice. These hdf5 files will store everything you need for subsequent
GW searches. Another important step in the notebook is to produce par
files which are stripped of tempo2 EFAC, EQUAD, ECORR, RedAmp, and
RedInd values. These values are replaced by mean values from Justin's
previous single-pulsar analyses.</p>

<h2>
<a id="single-pulsar-noise-analysis" class="anchor" href="#single-pulsar-noise-analysis" aria-hidden="true"><span class="octicon octicon-link"></span></a>Single-pulsar noise analysis</h2>

<p>It should be straightforward to perform a single-pulsar noise analysis
out of the box. </p>

<p>Run <code>python NX01_singlePsr.py --help</code> for a list of all options.</p>

<p>An example run command would be:</p>

<pre><code>python NX01_singlePsr.py
--parfile=./NANOGrav_9y/par/J1713+0747_NANOGrav_9yv1.t2.gls.strip.par
--timfile=./NANOGrav_9y/tim/J1713+0747_NANOGrav_9yv1.tim
--efacequad-sysflag=f --fullN --ptmcmc
</code></pre>

<p>Without the <code>--ptmcmc</code> option, the sampler will default to MultiNest.</p>

<p>If you have MPI installed you can parallelise by running the
following:</p>

<pre><code>mpirun -np 4 NX01_singlePsr.py
--parfile=./NANOGrav_9y/par/J1713+0747_NANOGrav_9yv1.t2.gls.strip.par
--timfile=./NANOGrav_9y/tim/J1713+0747_NANOGrav_9yv1.tim
--efacequad-sysflag=f --fullN --ptmcmc
</code></pre>

<p>where 4 cores will produce 4 temperature chains in the
parallel-tempering MCMC sampling process. Without the <code>--ptmcmc</code>
command, 4 cores would have been used to update the live points in MultiNest.</p>

<h2>
<a id="gravitational-wave-searches" class="anchor" href="#gravitational-wave-searches" aria-hidden="true"><span class="octicon octicon-link"></span></a>Gravitational-wave searches</h2>

<p>It is recommended to read in pulsars from their respective hdf5 files,
which you should have previously produced from the
<code>nanograv-pulsar-store.ipynb</code> notebook.</p>

<p>Run <code>python NX01_master.py --help</code> for a list of all options.</p>

<p>An example run command would be:</p>

<pre><code>python NX01_master.py --from-h5
--psrlist=./PsrListings_GWB.txt --nmodes=15
--incGWB --fix-slope --num_psrs=18 --fullN
</code></pre>

<p>which will perform a GW background upper-limit analysis (without
correlations...to include correlations add <code>--incCorr</code>) on the 18 pulsars analyzed in the 9-year NANOGrav limit paper.</p>

<p>As in the single-pulsar analysis case, you can use MPI for the PTMCMC,
however MultiNest functionality is not yet ready.</p>
        </section>

        <footer>
          NX01 is maintained by <a href="https://github.com/stevertaylor">stevertaylor</a><br>
          This page was generated by <a href="https://pages.github.com">GitHub Pages</a>. Tactile theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.
        </footer>

        
      </div>
    </div>
  </body>
</html>
